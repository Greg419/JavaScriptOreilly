<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Untitled Document</title>
</head>
<body>
    <script>
        var passenger = [{name : "John", paid: true, ticket : "firstclass"},
                          {name : "John", paid: true, ticket : "coach"},
                          {name : "John", paid: true, ticket : "firstclass"},
                          {name : "John", paid: true, ticket : "coach"},];
        
//        function createDrinkOrder(passenger){
//            if(passenger.ticket === "firstclass"){
//                alert("Your firstclass drink!!");
//            } else{
//                alert("Your coach drinking!!");       
//            }
//        }
        
        // 嘗試以回傳一個 function 來改寫
        function createDrinkOrder(passenger){
            // 1.宣告此變數來裝 欲回傳函數 
            var orderFunction;
            
            if(passenger.ticket === "firstclass"){
                // 接收欲回傳的函數
                orderFunction = function(){
                    alert("Your firstclass drink!!");
                };
            } else{
                orderFunction = function(){
                    alert("Your coach drinking!!");
                };
            }
            
            // 3.回傳此函數
            return orderFunction;
        }
        
        function serveCustomer(passenger){
            var getDrinkOrderFunction = createDrinkOrder(passenger);
            // 此函數改寫後 只有回傳 orderFunction 函數 沒有被invoke
            // 所以要宣告 getDrinkOrderFunction 來接這個函數並調用
            // createDrinkOrder(passenger);
            getDrinkOrderFunction();
            
            // 晚餐服務
            
            // createDrinkOrder(passenger);
            getDrinkOrderFunction();
            
            // 清理服務
            
            // createDrinkOrder(passenger);
            getDrinkOrderFunction();
        }
        
        
        function servePassengers (passenger) {
            for(var i = 0; i < passenger.length; i++){
                alert("==== We are derving the number " + i + " customer ====");
                serveCustomer(passenger[i]);
            }
        }
        
        servePassengers(passenger);
        
    </script>

</body>
</html>